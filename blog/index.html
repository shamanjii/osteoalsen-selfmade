<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SEO Blog - Neueste Beiträge</title>
    <meta name="description" content="Aktuelle Blog-Beiträge über SEO, Online Marketing und Webentwicklung">
    <link rel="stylesheet" href="assets/css/style.css">
    <link rel="icon" href="assets/images/favicon.ico">
</head>
<body>
    <header class="header">
        <div class="container">
            <div class="header-content">
                <img src="assets/images/logo.png" alt="Blog Logo" class="logo">
                <h1>SEO Blog</h1>
                <p>Tipps und Tricks für bessere Suchmaschinenoptimierung</p>
            </div>
        </div>
    </header>

    <main class="main">
        <div class="container">
            <section class="hero">
                <h2>Neueste Blog-Beiträge</h2>
                <p>Bleib auf dem Laufenden mit aktuellen SEO-Trends und Strategien</p>
            </section>

            <section class="posts-grid" id="postsContainer">
                <!-- Posts werden hier dynamisch geladen -->
                <div class="loading">
                    <p>Lade Beiträge...</p>
                </div>
            </section>

            <div class="pagination" id="pagination" style="display: none;">
                <!-- Pagination wird hier generiert -->
            </div>
        </div>
    </main>

    <footer class="footer">
        <div class="container">
            <p>&copy; 2025 SEO Blog. Alle Rechte vorbehalten.</p>
            <nav class="footer-nav">
                <a href="../legal/impressum.html">Impressum</a>
                <a href="../legal/datenschutz.html">Datenschutz</a>
                <a href="admin/">Admin</a>
            </nav>
        </div>
    </footer>

    <script src="assets/js/blog.js"></script>
    <script>
        // Posts laden beim Seitenaufruf
        document.addEventListener('DOMContentLoaded', function() {
            loadBlogPosts();
        });

        async function loadBlogPosts() {
            try {
                const response = await fetch('data/posts.json');
                const posts = await response.json();
                
                const container = document.getElementById('postsContainer');
                
                if (posts.length === 0) {
                    container.innerHTML = `
                        <div class="no-posts">
                            <h3>Noch keine Beiträge vorhanden</h3>
                            <p>Die ersten Blog-Posts sind in Vorbereitung!</p>
                        </div>
                    `;
                    return;
                }

                // Nur veröffentlichte Posts anzeigen
                const publishedPosts = posts.filter(post => post.status === 'published');
                
                // Posts nach Datum sortieren (neueste zuerst)
                publishedPosts.sort((a, b) => new Date(b.publishedAt) - new Date(a.publishedAt));

                // Posts HTML generieren
                const postsHTML = publishedPosts.map(post => `
                    <article class="post-card">
                        ${post.image ? `<img src="${post.image}" alt="${post.altText || post.title}" class="post-image">` : ''}
                        <div class="post-content">
                            <div class="post-meta">
                                <time datetime="${post.publishedAt}">
                                    ${new Date(post.publishedAt).toLocaleDateString('de-DE', {
                                        year: 'numeric',
                                        month: 'long',
                                        day: 'numeric'
                                    })}
                                </time>
                                ${post.keywords ? `<span class="post-keywords">${post.keywords.split(',').slice(0, 3).join(', ')}</span>` : ''}
                            </div>
                            <h3><a href="posts/${post.slug}.html">${post.title}</a></h3>
                            <p class="post-excerpt">${post.excerpt}</p>
                            <a href="posts/${post.slug}.html" class="read-more">Weiterlesen →</a>
                        </div>
                    </article>
                `).join('');

                container.innerHTML = postsHTML;
                
            } catch (error) {
                console.error('Fehler beim Laden der Posts:', error);
                document.getElementById('postsContainer').innerHTML = `
                    <div class="error">
                        <p>Fehler beim Laden der Blog-Posts. Bitte versuche es später erneut.</p>
                    </div>
                `;
            }
        }
    </script>
</body>
</html>